name: Lint

on:
  pull_request:
    branches: [ main ]  # Adjust this to your default branch name if different

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.x'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pylint flake8

    - name: Run linters
      run: |
        pylint **/*.py
        flake8 .

    - name: Report status
      if: always()
      uses: actions/<a href="mailto:github-script@v6.3.3">github-script@v6.3.3</a>
      with:
        github-token: ${{secrets.GITHUB_TOKEN}}
        script: |
          github.rest.checks.create({
            owner: context.repo.owner,
            repo: context.repo.repo,
            name: 'lint',
            head_sha: context.sha,
            status: 'completed',
            conclusion: 'success',
            output: {
              title: 'Lint Results',
              summary: 'Linting completed'
            }
          })

